<% layout("/layouts/boilerplate") %>

<div class="row justify-content-center my-5">
  <div class="col-lg-8 col-md-10">
    <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
     <!-- Updated show page image section -->
<% if (listing.image && listing.image.url) { %>
    <img
        src="<%= listing.image.url %>"
        alt="<%= listing.title %>"
        class="card-img-top"
        style="object-fit: cover; height: 350px"
        onerror="this.src='https://via.placeholder.com/800x350?text=Image+Not+Found'"
    />
<% } else { %>
    <img
        src="https://via.placeholder.com/800x350?text=No+Image+Available"
        alt="No Image"
        class="card-img-top"
        style="object-fit: cover; height: 350px"
    />
<% } %>


      <div class="card-body p-4">
        <!-- Heading -->
        <h3 class="text-center fw-bold mb-4" style="color: #fe424d">
          Listing Details
        </h3>

        <!-- Listing Info -->
        <ul class="list-group list-group-flush mb-4">
          <li class="list-group-item">
            <strong style="color: #fe424d">Title:</strong> <%= listing.title %>
          </li>
          <li class="list-group-item">
            <strong style="color: #fe424d">Description:</strong> <%=
            listing.description %>
          </li>
          <li class="list-group-item">
            <strong style="color: #fe424d">Price:</strong>  &#8377; <%= (listing.price || 0).toLocaleString("en-IN") %> 

          </li>
          <li class="list-group-item">
            <strong style="color: #fe424d">Location:</strong> <%=
            listing.location %>
          </li>
          <li class="list-group-item">
            <strong style="color: #fe424d">Country:</strong> <%= listing.country
            %>
          </li>
        </ul>

        <!-- Actions -->
        <div class="d-flex justify-content-center gap-3">
          <a href="/listings/<%= listing._id %>/edit" class="btn-custom"
            >Edit Listing</a
          >

          <form
            method="POST"
            action="/listings/<%= listing._id %>?_method=DELETE"
            onsubmit="return confirm('Are you sure you want to delete this listing?');"
          >
            <button type="submit" class="btn-custom">Delete Listing</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
